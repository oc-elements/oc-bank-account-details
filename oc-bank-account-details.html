<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../paper-item/paper-item.html">

<!-- @demo -->
<dom-module id="oc-bank-account-details">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <paper-input id="holderName" label="Account Holder Name" required auto-validate error-message="Please provide an account holder name"></paper-input>
    <paper-input id="holderSurname" label="Account Holder Surname" required auto-validate error-message="Please provide an account holder surname"></paper-input>
    <paper-input id="accountNumber" label="Account Number" required auto-validate allowed-pattern="[0-9]" error-message="Please provide an account number"></paper-input>
    <paper-input id="bank" label="Bank" required auto-validate error-message="Please provide a bank name"></paper-input>
    <paper-input id="branchCode" label="Branch Code" required auto-validate allowed-pattern="[0-9]" error-message="Please provide a branch code"></paper-input>
    <paper-input id="branchName" label="Branch Name" required auto-validate error-message="Please provide a branch name"></paper-input>
    <paper-dropdown-menu id="accountType" label="Account Type">
      <paper-listbox class="dropdown-content" selected="0">
        <paper-item>Cheque</paper-item>
        <paper-item>Savings</paper-item>
      </paper-listbox>
    </paper-dropdown-menu>
  </template>

  <script>
    Polymer({

      is: 'oc-bank-account-details',

      /**
       * Set the bank account details
       * @param {{holderName: String, holderSurname: String, accountNumber: Number, bank: String, branchCode: Number, branchName: String, accountType: String}} bankAccountDetails
       */
      setBankAccountDetails: function(bankAccountDetails) {
          this.$.holderName.value = bankAccountDetails.holderName;
          this.$.holderSurname.value = bankAccountDetails.holderSurname;
          this.$.accountNumber.value = bankAccountDetails.accountNumber;
          this.$.bank.value = bankAccountDetails.bank;
          this.$.branchCode.value = bankAccountDetails.branchCode;
          this.$.branchName.value = bankAccountDetails.branchName;
          this.$.accountType.select(this.$.accountType.indexOf(bankAccountDetails.accountType));
      },

      /**
       * Get the bank account details
       * @returns {{holderName: String, holderSurname: String, accountNumber: Number, bank: String, branchCode: Number, branchName: String, accountType: String}}
       */
      getBankAccountDetails: function() {
        return {
          holderName: this.$.holderName.value,
          holderSurname: this.$.holderSurname.value,
          accountNumber: this.$.accountNumber.value,
          bank: this.$.bank.value,
          branchCode: this.$.branchCode.value,
          branchName: this.$.branchName.value,
          accountType: this.$.accountType.selectedItem.value
        };
      },

      /**
       * Check if the current account details are valid
       * @returns {Boolean}
       */
      isValid: function() {
        return !(this.$.holderName.invalid ||
        this.$.holderSurname.invalid ||
        this.$.accountNumber.invalid ||
        this.$.bank.invalid ||
        this.$.branchCode.invalid ||
        this.$.branchName.invalid ||
        this.$.accountType.invalid)
      }
    });
  </script>
</dom-module>
